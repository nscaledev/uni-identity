---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.1
  name: organizations.unikorn-cloud.org
spec:
  group: unikorn-cloud.org
  names:
    categories:
    - unikorn
    kind: Organization
    listKind: OrganizationList
    plural: organizations
    singular: organization
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.domain
      name: domain
      type: string
    - jsonPath: .spec.providerName
      name: provider
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Organization describes an identity mapping.  The main job of
          this type is to take an email address identity, extract the domain and use
          it to resolve an identity provider.  It also is the place where users within
          that domain can be allowed based on groups/claims offered by that identity
          provider to limit access.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: OrganizationSpec defines the required configuration for the
              server.
            properties:
              domain:
                description: Domain is used by unikorn-identity to map an end-user
                  provided email address to an identity provider.
                type: string
              groups:
                description: Groups defines the set of groups that are allowed to
                  be mapped from the identity provider into unikorn.  If no groups
                  are specified then it is assumed all users have access to everything.
                items:
                  properties:
                    displayName:
                      description: DisplayName is the name to display the group as
                        in UIs and other UX interfaces.  This should again be unique
                        within the organization to avoid ambiguity, but may be changed.
                      type: string
                    id:
                      description: ID is the a unique, and immutable identifier for
                        the group, the intent being that resources will belong to
                        a group irrespective of display name changes.
                      type: string
                    providerName:
                      description: ProviderName is the name of the group as returned
                        by the provider. For example a query of https://cloudidentity.googleapis.com/v1/groups/
                        will return something like groups/01664s551ax43ok.
                      type: string
                  required:
                  - displayName
                  - id
                  - providerName
                  type: object
                type: array
              owner:
                description: Owner is a list of explicit user email address that is
                  an uber admin and gets full permissions to everything.
                type: string
              providerName:
                description: ProviderName is the name of an oauth2/oidc provider.
                type: string
              providerOptions:
                description: ProviderOptions is the configuration for a specific provider
                  type.
                properties:
                  google:
                    description: If the referenced provider is set to "google" then
                      the following parameters should be specified.
                    properties:
                      customerId:
                        description: CustomerID is retrieved from the "Account Settings
                          > Profile" page on https://admin.google.com for your organisation
                          and is required to lookup user groups for fine-grained RBAC.
                        type: string
                    required:
                    - customerId
                    type: object
                type: object
            required:
            - domain
            - owner
            - providerName
            type: object
          status:
            description: OrganizationStatus defines the status of the server.
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources: {}
